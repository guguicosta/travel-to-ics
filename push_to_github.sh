#!/bin/bash

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘         ğŸ“¤ Pushing to GitHub: guguicosta/travel-to-ics      â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

cd "$(dirname "$0")"

echo "ğŸ” Checking git status..."
git status

echo ""
echo "ğŸ“¦ Current branch: $(git branch --show-current)"
echo "ğŸ“¦ Remote URL: $(git remote get-url origin)"
echo ""

echo "ğŸš€ Pushing to GitHub..."
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

git push -u origin main

if [ $? -eq 0 ]; then
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "âœ… SUCCESS! Code pushed to GitHub!"
    echo ""
    echo "ğŸ“ Repository: https://github.com/guguicosta/travel-to-ics"
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo ""
    echo "ğŸ¯ NEXT STEPS:"
    echo ""
    echo "1. Go to: https://render.com"
    echo "2. Sign up with GitHub"
    echo "3. Click 'New +' â†’ 'Web Service'"
    echo "4. Select 'guguicosta/travel-to-ics'"
    echo "5. Configure:"
    echo "   - Name: travel-to-ics-converter"
    echo "   - Build Command: pip install -r requirements-production.txt"
    echo "   - Start Command: gunicorn -w 4 -b 0.0.0.0:\$PORT web_app_production:app"
    echo "6. Add Environment Variable:"
    echo "   - SECRET_KEY: (generate below)"
    echo ""
    echo "ğŸ”‘ Generate SECRET_KEY with:"
    echo "   python3 -c 'import secrets; print(secrets.token_hex(32))'"
    echo ""
    echo "7. Click 'Create Web Service'"
    echo "8. Wait 2-3 minutes for deployment"
    echo "9. Get your public URL!"
    echo ""
    echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
else
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "âŒ Push failed!"
    echo ""
    echo "If you see authentication error, you need to:"
    echo ""
    echo "Option 1 - Use GitHub CLI (Easiest):"
    echo "  brew install gh"
    echo "  gh auth login"
    echo "  Then run this script again"
    echo ""
    echo "Option 2 - Use Personal Access Token:"
    echo "  1. Go to: https://github.com/settings/tokens"
    echo "  2. Generate new token with 'repo' scope"
    echo "  3. When prompted for password, use the token"
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
fi
